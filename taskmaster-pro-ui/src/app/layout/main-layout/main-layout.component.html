
<!-- Main Layout Component HTML -->
<!-- Header with Application Title -->
<header style="background:#007bff; color:white; padding: 1rem;">
  <h1>Taskmaster Pro</h1>
</header>

<!-- Main Layout Component HTML -->
<mat-sidenav-container class="sidenav-container">
  <!-- Left Sidebar -->
  <mat-sidenav *ngIf="isLoggedIn$ | async" #sidenav [opened]="isSidenavOpen" class="sidenav glass-sidenav" mode="side">
    <mat-nav-list id="app-nav" aria-label="Main navigation">
      <a mat-list-item routerLink="/dashboard" routerLinkActive="active-link">
        <mat-icon mat-list-icon>dashboard</mat-icon>
        <span mat-line>Dashboard</span>
      </a>
      <a mat-list-item routerLink="/orders" routerLinkActive="active-link">
        <mat-icon mat-list-icon>receipt_long</mat-icon>
        <span mat-line>Orders</span>
      </a>
      <a mat-list-item routerLink="/schedules" routerLinkActive="active-link">
        <mat-icon mat-list-icon>schedule</mat-icon>
        <span mat-line>Schedules</span>
      </a>

      <!-- Admin Section Grouped -->
      <mat-accordion *ngIf="isAdmin" class="admin-accordion" multi>
        <mat-expansion-panel [expanded]="isAdminRoute$ | async" displayMode="flat" togglePosition="after">
          <mat-expansion-panel-header aria-label="Admin section">
            <mat-panel-title>
              <mat-icon>admin_panel_settings</mat-icon>
              <span>Admin</span>
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-nav-list id="admin-list">
            <a mat-list-item routerLink="/admin/users" routerLinkActive="active-link">
              <mat-icon mat-list-icon>people</mat-icon>
              <span mat-line>Users</span>
            </a>
            <a mat-list-item routerLink="/admin/orders" routerLinkActive="active-link">
              <mat-icon mat-list-icon>assignment_turned_in</mat-icon>
              <span mat-line>Orders</span>
            </a>
            <a mat-list-item routerLink="/admin/schedules" routerLinkActive="active-link">
              <mat-icon mat-list-icon>event_available</mat-icon>
              <span mat-line>Schedules</span>
            </a>
          </mat-nav-list>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-nav-list>
  </mat-sidenav>

  <!-- Main Content -->
  <mat-sidenav-content>
    <!-- Top Toolbar -->
    <mat-toolbar *ngIf="isLoggedIn$ | async" color="primary" class="app-toolbar">
      <button  mat-icon-button (click)="toggleSidenav()" class="mobile-toggle" aria-label="Open navigation menu">
        <mat-icon>menu</mat-icon>
      </button>
      <span class="logo-title">Taskmaster Pro</span>
      <span class="spacer"></span>
      <button mat-icon-button [matMenuTriggerFor]="userMenu" aria-label="User menu">
        <img src="user-grey.ico" alt="User Avatar" class="avatar">
      </button>
      <mat-menu #userMenu="matMenu">
        <button mat-menu-item (click)="goToProfile()">
          <mat-icon>person</mat-icon>
          <span>Profile</span>
        </button>
        <button mat-menu-item (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>Logout</span>
        </button>
      </mat-menu>
    </mat-toolbar>

    <!-- Where child pages (Dashboard, Orders, etc.) actually render: -->
    <main class="content">
      <router-outlet></router-outlet>
    </main>
  </mat-sidenav-content>
</mat-sidenav-container>